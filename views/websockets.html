<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <form>
        <input id="input" type="text" />
        <button onclick="send()" type="button">Send</button>
        <pre id="output"></pre>
    </form>
    <div id="app-1">
        <p v-if="seen">111</p>
    </div>
    <div id="app-2">
        <p v-if="seen">222</p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js">
    </script>
    <script type="text/javascript">
        var app1 = new Vue({
            el: '#app-1',
            data: {
                    seen: true
            }
        })
        var app2 = new Vue({
            el: '#app-2',
            data: {
                seen: true
            }
        })
        var socket = new WebSocket("ws://9.134.82.228:8080/ws/echo");
        socket.onopen = function() {
            console.log("connected")
        }
        socket.onmessage = function (e) {
            console.log(e.data)
            //output.innerHTML += "Server: " + e.data + "\n";
            if(e.data == 1) {
                app1.seen = !app1.seen
            }
            else if (e.data == 2){
                app2.seen = !app2.seen
            }
        };
        socket.onclose = function (e) {
            console.log('websocket 断开: ' + e.code + ' ' + e.reason + ' ' + e.wasClean)
            console.log(e)
            alert("closed!")
        }
        var input = document.getElementById("input");
        var output = document.getElementById("output");
        function send() {
            socket.send(input.value);
        }
    </script>
    
</body>
</html>